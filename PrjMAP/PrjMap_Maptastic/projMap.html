<html>
	<head>
		<style>
			body{
				margin:0;
				padding:0;
				background:gray;
				color:white;
			}
			video {
			width: 100%;
			height: 100%;
			}
		* {box-sizing:border-box}
		/* Slideshow container */
		.slideshow-container {
		max-width: 1500px;
		position: relative;
		margin: auto;
		}
		.mySlides {
		display: none;
					overflow: hidden;
		}
			video {
				width: auto;
			height: 1000px !important;
			object-fit: contain;
			}
		/* Next & previous buttons */
		.prev, .next {
		cursor: pointer;
		position: absolute;
		top: 50%;
		width: auto;
		margin-top: -22px;
		padding: 16px;
		color: white;
		font-weight: bold;
		font-size: 18px;
		transition: 0.6s ease;
		border-radius: 0 3px 3px 0;
		}
		/* Position the "next button" to the right */
		.next {
		right: 0;
		border-radius: 3px 0 0 3px;
		}
		/* On hover, add a black background color with a little bit see-through */
		.prev:hover, .next:hover {
		background-color: rgba(0,0,0,0.8);
		}
		/* Caption text */
		.text {
		color: #f2f2f2;
		font-size: 15px;
		padding: 8px 12px;
		position: absolute;
		bottom: 8px;
		width: 100%;
		text-align: center;
		}
		/* Number text (1/3 etc) */
		.numbertext {
		color: #f2f2f2;
		font-size: 12px;
		padding: 8px 12px;
		position: absolute;
		top: 0;
		}
		/* The dots/bullets/indicators */
		.dot {
		cursor:pointer;
		height: 13px;
		width: 13px;
		margin: 0 2px;
		background-color: #bbb;
		border-radius: 50%;
		display: inline-block;
		transition: background-color 0.6s ease;
		}
		.active, .dot:hover {
		background-color: #717171;
		}
		/* Fading animation */
		.fade {
		-webkit-animation-name: fade;
		-webkit-animation-duration: 1.5s;
		animation-name: fade;
		animation-duration: 1.5s;
		}
		@-webkit-keyframes fade {
		from {opacity: .4}
		to {opacity: 1}
		}
		@keyframes fade {
		from {opacity: .4}
		to {opacity: 1}
		}
		</style>
		<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
		<button id='button'>>>> Click here to get help <<<</button>
		<input type="file" id="files" name="files[]" multiple />
		<output id="list"></output>
		<script>
			var button = document.getElementById('button');
			button.onclick = function() {
				var div = document.getElementById('Help');
				if (div.style.display !== 'none') {
					div.style.display = 'none';
				}
				else {
					div.style.display = 'block';
				}
			};
		</script>
	</head>
	<body>
		<div id = "Help">
			<h2><span style="text-decoration: underline; font-family: helvetica; font-size: medium;"><strong>Controls:</strong></span></h2>
			<ul>
				<li><span style="font-family: helvetica; font-size: x-small;">
					To start this applet on local server [mac]: bash python -m SimpleHTTPServer
				SHIFT + Space Toggle edit mode</span><br /><br /></li>
				<span style="font-family: helvetica; font-size: large;"><em><strong>While In Edit Mode<br /><br /></strong></em></span>
				<li><span style="font-family: helvetica; font-size: x-small;">click or drag select and move quads/corner points</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">SHIFT + drag move selcted quad/corner point with 10x precision</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">ALT + drag rotate and scale selected quad</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">SHIFT + ALT + drag rotate and scale selected quad with 10x precision.</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">Arrow keys move selected quad/corner point</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">SHIFT + Arrow keys move selected quad/corner point by 10 pixels</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">ALT + Arrow keys rotate and scale selected quad</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">'s' Solo or unsolo the selected quad (hides all others). </span><br /><span style="font-family: helvetica; font-size: x-small;">This helps to adjust quads when corner points are very close together.</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">'c' Toggle mouse cursor crosshairs</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">'b' Toggle display bounds/metrics</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">'r' Rotate selected layer 90 degrees clockwise</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">'h' Flip selected layer horizontally</span></li>
				<li><span style="font-family: helvetica; font-size: x-small;">'v' Flip selected layer vertically</span></li>
			</ul>
		</div>
		<div id = "image">
			<div class="slideshow-container" id="slideshow-container">
			</div>
		</div>
		<script src="maptastic.min.js"></script>
		<script>
				Maptastic(image);
		var slideIndex = 0;
				var playing = false;
				var currentTimeout;
		function plusSlides(n) {
		showSlides(slideIndex += n);
		}
		function currentSlide(n) {
		showSlides(slideIndex = n);
		}
		function showSlides(n) {
		var i;
		var slides = document.getElementsByClassName("mySlides");
		var dots = document.getElementsByClassName("dot");
		if (n > slides.length) {slideIndex = 1}
		if (n < 1) {slideIndex = slides.length}
		for (i = 0; i < slides.length; i++) {
		slides[i].style.display = "none";
		}
		for (i = 0; i < dots.length; i++) {
		dots[i].className = dots[i].className.replace(" active", "");
		}
		slides[slideIndex-1].style.display = "block";
		//dots[slideIndex-1].className += " active";
		}
		function startShowSlides() {
		var i;
		var slides = document.getElementsByClassName("mySlides");
		for (i = 0; i < slides.length; i++) {
		slides[i].style.display = "none";
		}
		slideIndex++;
		if (slideIndex> slides.length) {slideIndex = 1}
		slides[slideIndex-1].style.display = "block";
						if (playing == true) {
							currentTimeout = setTimeout(startShowSlides, 1000); // Change image every x seconds
						}
		}
				function togglePlayPause() {
						if (playing == true) {
								playing = false;
								clearTimeout(currentTimeout);
						} else {
								playing = true;
								startShowSlides();
						}
				}
				if (window.File && window.FileReader && window.FileList && window.Blob) {
				// Great success! All the File APIs are supported.
				} else {
					alert('The File APIs are not fully supported in this browser.');
				}
		function handleFileSelect(evt) {
		var files = evt.target.files; // FileList object
		// files is a FileList of File objects. List some properties.
		var output = [];
					var video_ids = [];
		for (var i = 0, f; f = files[i]; i++) {
		if (f.name.slice(-3) != "mov" && f.name.slice(-3) != "MOV" && f.name.slice(-3) != "mp4" && f.name.slice(-3) != "MP4" && f.name.slice(-3) != "avi" && f.name.slice(-3) != "AVI") {
		output.push("<div class=\"mySlides fade\"><div class=\"numbertext\">1 / 3</div><img src=\"media/" + escape(f.name) + "\" style=\"width:1000px\"><div class=\"text\"></div></div>");
		} else {
		output.push("<div class=\"mySlides fade\"><div class=\"numbertext\">i / f</div><video controls=\"controls\" poster=\"image\" preload=\"true\" loop=\"true\" autoplay=\"true\" src=\"media/" + escape(f.name) + "\" id=\"video" + i + "\"></video><div class=\"text\"></div></div>");
							video_id = "video" + i;
							video_ids.push(video_id);
		}
		}
		document.getElementById('slideshow-container').innerHTML = output.join('') + "<a class=\"prev\" onclick=\"plusSlides(-1)\">&#10094;</a><a class=\"next\" onclick=\"plusSlides(1)\">&#10095;</a>";
					for (var i=0; i < video_ids.length; i++) {
						var vid = document.getElementById(video_ids[i]);
					}
					showSlides(0);
		}
		document.getElementById('files').addEventListener('change', handleFileSelect, false);
		document.addEventListener('keydown', (event) => {
		const keyName = event.key;
		if (keyName == 'ArrowLeft') {
		plusSlides(-1);
		} else if (keyName == 'ArrowRight') {
		plusSlides(1);
		} else if (keyName == 'p') {
						togglePlayPause();
					}
		}, false);
		</script>
	</body>
</html>